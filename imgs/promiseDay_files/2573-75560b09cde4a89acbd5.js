"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2573],{22573:function(e,t,i){i.d(t,{NP:function(){return M},Ml:function(){return z}});var n=i(85893),o=i(809),r=i.n(o),l=i(30266),a=i(77867),d=i(92809),u=i(12478),c=i(67294),s=i(14494),p=i(11163),v=i(62286),f=i(63105),m=i.n(f),g=i(41609),h=i.n(g),y=i(27361),D=i.n(y),I=i(29521),E=i.n(I),P=i(23279),S=i.n(P),b=i(61049),C=i(48339),T=i(81993),k=i(16343),w=i(75961),N=i(24066),x=i(57733),O=i(10805),L=i(99763),A=i(70737),R=i(97496);function U(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function _(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?U(Object(i),!0).forEach((function(t){(0,d.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var M=(0,c.createContext)({}),z=function(e){var t=e.children,i=e.product,o=(0,v.parseCookies)(),f=(0,s.I0)(),g=(0,p.useRouter)(),y=(0,s.v9)((function(e){return e.appConfigs})),I=y.isMobile,P=(0,c.useState)(!1),U=P[0],z=P[1],Z=(0,c.useState)("details"),F=Z[0],j=Z[1],G=(0,c.useState)({}),B=G[0],W=G[1],q=(0,s.v9)((function(e){var t;return null===(t=e.currenciesList)||void 0===t?void 0:t.currencies})),X=(0,c.useState)(!1),V=X[0],Y=X[1],J=(0,s.v9)((function(e){return e.locationLockLists||{}})).countryList;(0,c.useEffect)((function(){U?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll")}),[U]);var H=function(e,t){document.querySelectorAll(t).forEach((function(t){t.style.display="show"===e?"block":"none"}))};(0,c.useEffect)((function(){I||document.body.addEventListener("click",(function(e){new RegExp("(?:^|\\s)".concat(["offer-tnc-txt","MuiButton-label","d-add-to-cart","d-buy-now"].join("|"),"(?:\\s|$)"),"i").test(e.target.className)||(H("hide",".offer-tnc-popup"),H("hide",".tooltip"))}))}),[I]);var K=(0,s.v9)((function(e){return e.appData})).selectedCurrency;(0,c.useEffect)((function(){(0,k.NW)(K,q,f,I)}),[K,null===q||void 0===q?void 0:q.length,f]);var $=(0,s.v9)((function(e){return e.productDetail})),Q=$.product.countryGeoId,ee=(0,s.v9)((function(e){return e.productDetail.shippingDatesAndMethods})),te=(0,s.v9)((function(e){return e.productDetail.priceSurgeDetails})),ie=(0,s.v9)((function(e){return e.dateRangeSwitch})).isCourierDateRangeEnable,ne=(0,s.v9)((function(e){return e.locationLockLists.finalSelectedPinCode})),oe=(0,s.v9)((function(e){var t,i;return null===e||void 0===e||null===(t=e.userDetails)||void 0===t||null===(i=t.checkLoginInfo)||void 0===i?void 0:i.loggedin})),re=(0,s.v9)((function(e){var t;return null===(t=e.productDetail)||void 0===t?void 0:t.isInternationalEnable})),le=(0,s.v9)((function(e){return e.pdpContext})),ae=le.pdpUserSelections,de=le.selectedType,ue=le.selectedFlavour,ce=le.flavours,se=le.selectedVariant,pe=le.userPersonalization,ve=le.variantList,fe=le.quantityList,me=le.deliveryType,ge=le.imageConfigs,he=le.uploadProgressStatus,ye=y.catalogId,De=ae.pinCode,Ie=$.currencyCode||"\u20b9",Ee=$.currencyFactor||1,Pe=i.shippingDisplayOptions,Se=i.featureSet,be=i.variantProducts,Ce=i.productId,Te=i.primaryCategoryId,ke=i.productTypeId,we=i.assocProductDetails,Ne=i.personalizedInfo,xe=i.defaultFeature,Oe=i.productName,Le=i.productPrice,Ae=i.urlIdentifier,Re=i.isVariant,Ue=i.productReviewsAndRatings,_e=i.skuCode,Me=$.productPriceByDate,ze=$.productPriceByPincode,Ze=$.deliveryTimeLeft,Fe="Y"===$.productExpiry.isProductStockAvailable,je=(0,c.useRef)(null),Ge=(0,c.useRef)(null),Be=(0,c.useRef)(null),We=(0,c.useRef)(null),qe=(0,c.useRef)(null),Xe=(0,c.useRef)(null),Ve=(0,c.useRef)(null),Ye={TEXT:Be,IMAGE:Ge,AUDIO:Ge,VIDEO:Ge};(0,c.useEffect)((function(){f((0,w.gN)(Te))}),[Te,f]);var Je=(0,c.useState)({}),He=Je[0],Ke=Je[1],$e=function(){return"UAE"===ye},Qe=function(){return Ce.includes("CAKE")},et=function(){return Te===b.M5.INTERNATIONAL},tt=function(){return"Y"===i.isVirtual},it=function(){return!(!Pe||Pe.showPincodeOrCity)&&Object.keys(Pe.defaultGeoDetails).length>0},nt=function(){return ke===b.M5.DIGITAL_GOOD},ot=function(){Ke({})},rt=function(e){f((0,w.cH)(e))};(0,c.useEffect)((function(){var e,t=(0,C.Wm)([Ce]),i=null===we||void 0===we||null===(e=we.substituteProduct)||void 0===e?void 0:e.productId;!t&&i&&(t=(0,C.Wm)([i])),t?(t=JSON.parse(t),f((0,w.Pw)(t.po))):f((0,w.Pw)([])),ee[Ce]&&f((0,k.yj)(ee[Ce])),f((0,k.iZ)({productId:Ce}))}),[Ce]);var lt=function(e){var t,n,o=null===i||void 0===i||null===(t=i.assocProductDetails)||void 0===t||null===(n=t.substituteProduct)||void 0===n?void 0:n.productId;o&&window.localStorage.removeItem(o),(0,C.jX)([Ce],JSON.stringify({po:e})),f((0,w.Pw)(e))},at=function(e){if(ge.length>0&&window.localStorage.getItem(Ce))return f((0,w.WE)(ge)),ge;var t=[];return Array(parseInt(e,10)).fill("").map((function(e,i){return t.push({isUploading:!1,isUploaded:!1,isSizeExtError:!1,isBackendError:!1,imgUrl:null,id:i}),t})),t},dt=function(){var e,t,n=null===i||void 0===i||null===(e=i.assocProductDetails)||void 0===e||null===(t=e.substituteProduct)||void 0===t?void 0:t.productId;n&&window.localStorage.removeItem(n),window.localStorage.removeItem(Ce),f((0,w.Pw)([])),null!==Ne&&void 0!==Ne&&Ne.personalizedProduct&&function(){var e=(0,T.TD)(null===Ne||void 0===Ne?void 0:Ne.personalizedOptions),t=at(h()(e)?0:e.maxInputRequired);f((0,w.WE)(t))}()},ut=function(e){if(pe.filter((function(t){return t.fieldName===e.fieldName})).length>0){var t=pe.map((function(t){return t.fieldName===e.fieldName?_(_({},t),e):t}));lt(t)}else lt([].concat((0,a.Z)(pe),[e]))},ct=function(e,t){var i={derivedFieldName:t.name,fieldName:t.fieldName,label:t.label,contentType:t.contentType||"IMAGE",value:e};return ut(i),!0},st=function(e){return(Se||[]).indexOf(e)>-1},pt=function(){var e=[];return be&&be.forEach((function(t){var i=Object.keys(t),n=(0,u.Z)(i,1)[0],o=t[n],r=n.split("|"),l=(0,u.Z)(r,3),a=l[0],d=l[1],c=l[2],s={title:a,type:d,fullInfo:o,price:o.productPrice.price,image:o.productContent.productImages.length?o.productContent.productImages[0]:null,productId:o.productId,skuCode:o.skuCode,urlIdentifier:o.urlIdentifier};c&&(s.flavour=c),e.push(s)})),e},vt=function(){var e=pt(),t={};if(de&&(t.type=de),(null===Se||void 0===Se?void 0:Se.length)>2)if(ue)t.flavour=ue;else if(e.length){var i;t.flavour=null===(i=e[0])||void 0===i?void 0:i.flavour}return e=m()(e,t)},ft=function(e,t){var i=pt();if(st(b.pX.INGREDIENTS)||st(b.pX.STEMS)||st(b.pX.PIECES)){var n={};return n.title=e,t&&(n.flavour=t),i=m()(i,n)}return[]},mt=function(){return Te===b.M5.COURIER},gt=function(){return Te===b.M5.PERSONALIZED},ht=function(){return!!we},yt=function(){return mt()||gt()},Dt=function(){rt({timeSlotId:"",itemDesiredDeliveryDate:"",shippingMethodId:"",itemDesiredDeliveryDatesList:""})},It=function(e){var t=e.deliveryDate,i=e.shippingMethodName,n=e.slot,o=e.shipmentMethodId,r=e.dateRange,l=e.isDateModifiedToEarliest,a={timeSlotId:null===n||void 0===n?void 0:n.timeSlotId,shippingMethodId:o,shippingCost:null===n||void 0===n?void 0:n.shippingPrice,shippingMethodName:i,shippingSlot:n,itemDesiredDeliveryDatesList:r||(null===ae||void 0===ae?void 0:ae.itemDesiredDeliveryDatesList),isDateModifiedToEarliest:l};l||(a.itemDesiredDeliveryDate=(0,T.x7)(new Date(t))),et()&&"N"===re&&(a.shippingCost=null===n||void 0===n?void 0:n.shippingPrice,a.itemDesiredDeliveryDate="",(0,k.bp)({city:ae.pinCode,productId:Ce,shipmentType:o,timeSlotId:null===n||void 0===n?void 0:n.timeSlotId},f)),rt(a),ot()},Et=function(){var e=(0,v.parseCookies)().lastSelectedDeliveryDate;if(ee.isDatesAvailable){var t=ee.deliveryDates,i=ee.shippingDetails;if(i){var n=Object.keys(i),o=(0,u.Z)(t,1)[0],r=e?(0,T.x7)(new Date(e)):null,l=!!r&&(0,T.ZW)(r)<(0,T.ZW)(o);if(r&&!l&&(o=r),1===n.length){var a=(0,u.Z)(n,1)[0],d=i[a];if(1===d.timeSlots.length){var c=(0,u.Z)(d.timeSlots,1)[0],s={shippingMethodName:d.shippingMethodName,shipmentMethodId:a,slot:c,deliveryDate:(0,T.ZW)(o),isDateModifiedToEarliest:l};l||It(s)}}}}},Pt=function(){if(Pe&&Pe.showPincodeOrCity){if(et()){if(!ae.destlookupintl||!ae.selectedCity||!ae.deliveryLocation||!ae.pinCode)return!1}else if(!ae.pinCode||!ae.matchedPincode||!ae.deliveryLocation||!ae.destlookup)return!1;return!0}return!0},St=function(){var e=(0,l.Z)(r().mark((function e(t,i){var n,o,l,a,d,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pt()){e.next=25;break}if(!(n=et())){e.next=21;break}if("Y"!==re){e.next=15;break}return o={resource:"fnp",name:"includeShippingDetails"},e.next=7,(0,L.A5)(o);case 7:return l=e.sent,f((0,k.Jb)(null===l||void 0===l?void 0:l.value)),e.next=11,(0,k.X$)(t,i,f,"",n,Q,null===l||void 0===l?void 0:l.value);case 11:a=e.sent,f((0,k.cT)(!(null!==a&&void 0!==a&&a.isDatesAvailable))),e.next=19;break;case 15:return e.next=17,(0,k.Ot)({city:t,productId:i},f);case 17:d=e.sent,f((0,k.cT)(!(null!==d&&void 0!==d&&d.isShippingDetailsExists)));case 19:e.next=25;break;case 21:return e.next=23,(0,k.X$)(t,i,f,"",n);case 23:u=e.sent,f((0,k.cT)(!(null!==u&&void 0!==u&&u.isDatesAvailable)));case 25:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),bt=function(e){var t=(0,k.Dj)(null===e||void 0===e?void 0:e.fullInfo),i=ft(null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.flavour);f((0,w.G$)(i)),null!==i&&void 0!==i&&i.length&&f((0,w.Pm)(null===e||void 0===e?void 0:e.type)),f((0,w.kZ)(null===e||void 0===e?void 0:e.flavour)),f((0,w.nM)(_(_({},null===e||void 0===e?void 0:e.fullInfo),{},{title:null===e||void 0===e?void 0:e.title,type:null===e||void 0===e?void 0:e.type}))),f((0,k.Pi)(t)),it()||St(null===ae||void 0===ae?void 0:ae.pinCode,null===e||void 0===e?void 0:e.productId),Dt(),Ke({})};(0,c.useEffect)((function(){var e=g.query,t=pt();if(null!==t&&void 0!==t&&t.length){var i=t.find((function(t){return t.urlIdentifier===e.slug1}))||t[0],n=function(e){var t,i="",n=null===(t=window)||void 0===t?void 0:t.location.pathname.split("/");return n&&(null===e||void 0===e||e.forEach((function(e){var t=e.fullInfo.urlIdentifier.split("/");(t.length>1?n[3]===t[1]:n[2]===t[0])&&(i="".concat(e.title,"|").concat(e.type,"|").concat(e.flavour))}))),i}(t)||xe;if(n){var o=n.split("|"),r=(0,u.Z)(o,3),l=r[0],a=r[1],d=r[2];i=l&&a&&t.find((function(e){return e.title===l&&e.type===a&&e.flavour===d}))||i,Qe()&&f((0,w.Pm)(a))}else f((0,w.Pm)(i.type));bt(i)}}),[]),(0,c.useEffect)((function(){var e=vt();if(e.length){var t=e.filter((function(e){return e.title===se.title})),i=(0,u.Z)(t,1)[0];i&&function(e){var t=(0,k.Dj)(e.fullInfo);f((0,w.nM)(_(_({},e.fullInfo),{},{title:e.title,type:e.type}))),f((0,k.Pi)(t)),f((0,w.G$)(ft(e.title,e.flavour)))}(i)}f((0,w.wi)(e))}),[de,ue]);var Ct=function(e){document.getElementById("fastAvailable")&&(e===b.M5.COURIER||e===b.M5.PERSONALIZED?(document.getElementById("fastAvailable").style.visibility="visible",setTimeout((function(){var e;null===(e=document.getElementById("fastAvailable"))||void 0===e||e.classList.add("toast-fade-out")}),2e3),setTimeout((function(){var e;document.getElementById("fastAvailable")&&(null===(e=document.getElementById("fastAvailable"))||void 0===e||e.classList.remove("toast-fade-out"),document.getElementById("fastAvailable").style.visibility="hidden")}),2500)):document.getElementById("fastAvailable").style.visibility="hidden")},Tt=function(e,t){var i=e.map((function(e){return e.imgUrl}));ct(i,t)},kt=function(e){return"pz/".concat((0,T.Yr)(),"/").concat((0,T.Dl)(10),"-").concat(e)},wt=function(e,t,i,n,o){var r=1048576;return o>e*("KB"===t?1024:r)&&o<i*("MB"===n?r:1024)},Nt=function(){var e=(0,l.Z)(r().mark((function e(t,i,n,o,l,d,u,c){var s,p,v,m,g,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,a.Z)(ge),!((p=s.findIndex((function(e){return e.id===c})))>-1)){e.next=16;break}if(!wt(o,l,d,u,i.size)||!(0,T.EX)(n,i.type)){e.next=14;break}return v=kt(i.name),s[p]=_(_({},s[p]),{},{isUploading:!0,isSizeExtError:!1}),f((0,w.hp)(!0)),f((0,w.WE)(s)),e.next=10,(0,k.p7)({fileName:v},i,f);case 10:(m=e.sent).isSuccess&&(g=new URL(m.data.presignedUrl),h=g.origin+g.pathname,s[p]=_(_({},s[p]),{},{isUploading:!1,isSizeExtError:!1,isUploaded:!0,imgUrl:h}),f((0,w.WE)(s)),f((0,w.hp)(!1)),Tt(s,t)),e.next=16;break;case 14:s[p]=_(_({},s[p]),{},{isUploading:!1,isSizeExtError:!0}),f((0,w.WE)(s));case 16:case"end":return e.stop()}}),e)})));return function(t,i,n,o,r,l,a,d){return e.apply(this,arguments)}}(),xt=function(){var e=(0,l.Z)(r().mark((function e(t,i,n,o,d,u,c){var s,p,v,m,g,h,y,D;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ot(),(s=ge.filter((function(e){return null===e.imgUrl&&!1===e.isUploading}))).length>0&&(p=s.slice(0,i.length),v=p.map((function(e,t){return wt(o,d,u,c,i[t].size)&&(0,T.EX)(n,i[t].type)?_(_({},e),{},{isUploading:!0,isSizeExtError:!1,isBackendError:!1,file:i[t]}):_(_({},e),{},{file:i[t],isUploading:!1,isBackendError:!1,isSizeExtError:!0})})),m=v.filter((function(e){return!e.isSizeExtError})),g=v.map((function(e){return e.id})),h=E()(ge,g,(function(e,t){return e.id===t})),y=[].concat((0,a.Z)(v),(0,a.Z)(h)).sort((function(e,t){return e.id-t.id})),f((0,w.hp)(!0)),f((0,w.WE)(y)),D=m.map(function(){var e=(0,l.Z)(r().mark((function e(t){var i,n,o,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kt(t.file.name),e.next=3,(0,k.p7)({fileName:i},t.file,f);case 3:if(!(n=e.sent).isSuccess){e.next=8;break}return o=new URL(n.data.presignedUrl),l=o.origin+o.pathname,e.abrupt("return",_(_({},t),{},{isUploading:!1,isSizeExtError:!1,isUploaded:!0,imgUrl:l,isBackendError:!1}));case 8:return e.abrupt("return",_(_({},t),{},{isUploading:!1,isSizeExtError:!1,isUploaded:!1,imgUrl:null,isBackendError:!0}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(D).then((function(e){var i=e.map((function(e){return e.id})),n=E()(y,i,(function(e,t){return e.id===t})),o=[].concat((0,a.Z)(e),(0,a.Z)(n)).sort((function(e,t){return e.id-t.id}));f((0,w.WE)(o)),f((0,w.hp)(!1)),Tt(o,t)})).catch((function(e){return new Error(e)})));case 3:case"end":return e.stop()}}),e)})));return function(t,i,n,o,r,l,a){return e.apply(this,arguments)}}(),Ot=function(e){window.scrollTo({behavior:"smooth",top:e})},Lt=function e(t,i){var n=t||0;n<i&&setTimeout((function(){window.scrollTo(0,n),e(n+8,i)}),8)},At=function(){return!!(ae.shippingMethodId&&ae.timeSlotId&&ae.itemDesiredDeliveryDate)},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=ee[e];return!t||t.isShippingDetailsExists&&t.isDatesAvailable};(0,c.useEffect)((function(){J||f((0,N.t)())}),[f,J]);var Ut=function(e){if(J){var t,i=null===J||void 0===J||null===(t=J.countryList)||void 0===t?void 0:t.filter((function(e){return e.catalogID===ye&&ye!==x.pG.CATALOG_ID_INDIA}));(null===i||void 0===i?void 0:i.length)>0&&function(e,t){var i=(0,v.parseCookies)().selectedCountries,n=t.pincode,o=t.location,r={maxAge:2592e3,path:"/",encode:decodeURIComponent},l=_(_({},i&&(0,T.Pb)(i)?JSON.parse(i):{}),{},(0,d.default)({},Q,{country:e.name,categoryId:"".concat(ye,"/gifts"),catalogId:ye,countryId:Q}));n&&o&&(l[Q].city=o,l[Q].cityId=n),(0,v.setCookie)({},x.pG.ALL_SELECTED_COUNTRIES,JSON.stringify(l),r)}(i[0],e)}},_t=function(){var e=(0,l.Z)(r().mark((function e(t){var i,n,l,a,d,u,c,s,p,m,g,h,y,D,I,E,P,S,C,w,N,U,M,z,Z,F,j,G;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pincode,l=t.location,a=t.event,d=t.trigger,u=(0,T.N0)(Le.listPrice,Le.price),c=(0,T.uR)(me),s={page_type:A.cleverTapCommonWords.PDP,page_name:Ae,product_name:Oe,pid:Ce,product_category:Te,product_price:Le.price,is_variant_available:"Y"===Re,is_egg:null!==(i=(null===de||void 0===de?void 0:de.toUpperCase())===b.W6.WITH_EGG)&&void 0!==i&&i,delivery_type:c,pincode:n,system_pincode:n,strike_price:Le.listPrice,discount_percentage:u,product_rating:null===Ue||void 0===Ue?void 0:Ue.ratingValue,product_review_count:null===Ue||void 0===Ue?void 0:Ue.totalReview,is_product_available:Fe,is_international:et(),sku_id:_e},"location-place-selected"!==d&&((0,R.default)(A.cleverTapEventsConstants.locationPincodeSelected,s),(0,R.default)(A.cleverTapEventsConstants.locationSaved,_(_({},s),{},{area:l,sku_id:_e}))),ae.pinCode===n){e.next=69;break}if(m={},g={maxAge:2592e3,path:"/",encode:decodeURIComponent},h=be?null===se||void 0===se?void 0:se.productId:Ce,y={deliveryLocation:l,destlookup:l,matchedPincode:n,pinCode:n,timeSlotId:"",itemDesiredDeliveryDate:"",shippingMethodId:"",itemDesiredDeliveryDatesList:""},!et()){e.next=40;break}if(y={destlookupintl:t.location,deliveryLocation:t.location,destlookup:"",matchedPincode:"",pinCode:n,timeSlotId:"",itemDesiredDeliveryDate:"",itemDesiredDeliveryDatesList:"",shippingMethodId:"",selectedCity:n},rt(y),!n){e.next=18;break}return e.next=16,(0,O.HK)(n);case 16:null!==(D=e.sent)&&void 0!==D&&D.isSuccess&&(0,v.setCookie)(m,x.pG.PF,null===D||void 0===D?void 0:D.cacheKey,g);case 18:return(0,v.setCookie)(m,b.XL.LAST_SELECTED_LOCATION,l,_(_({},g),{},{path:"/".concat(ye,"/gift")})),(0,v.setCookie)(m,b.XL.LAST_SELECTED_CITY,n,_(_({},g),{},{path:"/".concat(ye,"/gift")})),Ut(t),I={resource:"fnp",name:"includeShippingDetails"},e.next=24,(0,L.A5)(I);case 24:if(E=e.sent,f((0,k.Jb)(null===E||void 0===E?void 0:E.value)),P=et(),"Y"!==re){e.next=34;break}return e.next=30,(0,k.X$)(n,h,f,"",P,Q,null===E||void 0===E?void 0:E.value);case 30:p=e.sent,f((0,k.cT)(!(null!==(S=p)&&void 0!==S&&S.isDatesAvailable))),e.next=38;break;case 34:return e.next=36,(0,k.Ot)({city:n,productId:h},f);case 36:p=e.sent,f((0,k.cT)(!(null!==(C=p)&&void 0!==C&&C.isShippingDetailsExists)));case 38:e.next=67;break;case 40:if(rt(y),n||l){e.next=43;break}return e.abrupt("return");case 43:if(it()){e.next=53;break}return e.next=46,(0,O.HK)(n);case 46:(w=e.sent).isSuccess&&(0,v.setCookie)({},x.pG.PF,w.cacheKey,g),(0,v.setCookie)(m,b.XL.LAST_SELECTED_PINCODE,n,g),(0,v.setCookie)(m,b.XL.LAST_SELECTED_ADDRESS,l,g),oe&&f({type:b.XL.SET_LOGGED_IN_PINCODE,payload:{pincode:n,email:o.faul,customerAddress:l}}),N=(0,v.parseCookies)(),(U=N.selectedFiltersObj)&&"india"===(M=JSON.parse(U)).selectedCountry&&M.pincode!==n&&(0,v.destroyCookie)(null,"selectedFiltersObj",g);case 53:if(!$e()){e.next=59;break}return e.next=56,(0,k.m1)(n,h,f);case 56:p=e.sent,e.next=66;break;case 59:return z=null,ht&&(z=null===we||void 0===we||null===(Z=we.substituteProduct)||void 0===Z?void 0:Z.productId),F=et(),e.next=64,(0,k.X$)(n,h,f,z,F,a,l);case 64:p=e.sent,z?(j=p[z].isDatesAvailable||p[Ce].isDatesAvailable,f((0,k.cT)(!j))):f((0,k.cT)(!(null!==(G=p)&&void 0!==G&&G.isDatesAvailable)));case 66:(0,k.tN)(n,h,f);case 67:(0,k.yi)(f,Ce),ot();case 69:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mt=function(){var e=(0,l.Z)(r().mark((function e(t){var i,n,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.location,n=t.pincode,o={pincode:n,location:"".concat(n,", ").concat(i)},e.next=4,_t(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=(0,v.parseCookies)(),t=e.lastSelectedAddress,i=e.lastSelectedPincode,n=e.lastSelectedIntlCity,o=e.lastSelectedIntlLoc;et()?o&&n&&re&&_t({pincode:n,location:o}):!it()&&i&&t?_t({pincode:i,location:t}):it()||_t({pincode:"",location:""})}),[ne,re]),(0,c.useEffect)((function(){if(I){var e=(0,C.YS)(["".concat(Ce,"-selections")]);if(e){var t=JSON.parse(e);rt(t),mt()||gt()||(0,k.nh)({FNP_CURRENT_CATALOG_ID:ye,geoId:t.pinCode,deliveryDate:t.itemDesiredDeliveryDate,productId:null!==i&&void 0!==i&&i.variantProducts?null===se||void 0===se?void 0:se.productId:Ce},!1,f),(0,C.ke)(["".concat(Ce,"-selections")])}}}),[Ce]),(0,c.useEffect)((function(){I||!ae.itemDesiredDeliveryDate||mt()||gt()?ae.itemDesiredDeliveryDate||h()(Me)||f((0,k.YC)({})):(0,k.nh)({FNP_CURRENT_CATALOG_ID:ye,geoId:ae.pinCode||ne,deliveryDate:ae.itemDesiredDeliveryDate,productId:null!==i&&void 0!==i&&i.variantProducts?null===se||void 0===se?void 0:se.productId:Ce},!1,f)}),[ae.itemDesiredDeliveryDate,f,null===se||void 0===se?void 0:se.productId]);var zt=I?De:ae.pinCode||ne;(0,c.useEffect)((function(){!it()&&(I&&De||ae.pinCode||ne)&&(0,k.nh)({FNP_CURRENT_CATALOG_ID:ye,geoId:I?De:ae.pinCode||ne,productId:null!==i&&void 0!==i&&i.variantProducts?null===se||void 0===se?void 0:se.productId:Ce},!0,f)}),[Ce,zt,null===se||void 0===se?void 0:se.productId,f]),(0,c.useEffect)((function(){var e;yt()&&Pt()&&!ae.shippingMethodId&&Et(),null!==ee&&void 0!==ee&&null!==(e=ee.deliveryDates)&&void 0!==e&&e.length?window.deliveryDates=ee.deliveryDates:window.deliveryDates=null}),[ee,null===se||void 0===se?void 0:se.productId]);var Zt=function(){var e=ae.itemDesiredDeliveryDate,t=Me.isPricingRuleApplied,n=Me.productId;return te.isSuccess&&"Y"===t&&(!(null!==i&&void 0!==i&&i.variantProducts)||n===(null===se||void 0===se?void 0:se.productId))&&""!==e},Ft=function(){var e=ze.isPricingRuleApplied,t=ze.geoId,n=ze.productId;return ae.pinCode===t&&"Y"===e&&(!(null!==i&&void 0!==i&&i.variantProducts)||n===(null===se||void 0===se?void 0:se.productId))},jt={getPrice:function(e){return"INR"!==o.localCurrency&&(o.localCurrency||null!==$&&void 0!==$&&$.currencyCode)?(e*Ee).toFixed(2):e},currencyCode:Ie,changeURLHash:function(e){var t,i="".concat(window.location.pathname).concat(window.location.search).concat(e);g.push({pathname:"/mobile-pdp",query:g.query,hash:(null===(t=e.split("#"))||void 0===t?void 0:t[1])||e},i,{shallow:!0})},replaceURLHash:function(e){var t,i="".concat(window.location.pathname).concat(window.location.search).concat(e);g.replace({pathname:"/mobile-pdp",query:g.query,hash:(null===(t=e.split("#"))||void 0===t?void 0:t[1])||e},i,{shallow:!0})},pdpUserSelections:ae,errors:He,setErrors:Ke,containerRef:je,personalizedImageRef:Ge,personalizedInputRef:Be,reviewsModuleRef:We,offersModuleRef:qe,descriptionModuleRef:Xe,moreModuleRef:Ve,gotoOffers:function(){var e=qe.current.offsetTop,t=Ze&&Fe&&!yt()&&!et()?e+105:e+60,i=I?e+350:t;I?Ot(i):Lt(60,i)},gotoReviews:function(){var e=We.current.offsetTop;Ot(I?e+400:e-150)},gotoDescription:function(){var e=Xe.current.offsetTop,t=I?e+350:e;I?Ot(t):Lt(60,t)},gotoMore:function(){var e=Ve.current.offsetTop;Ot(I?e+390:e)},gotoTop:function(){window.scrollTo({behavior:"smooth",top:0})},updatePdpUserSelections:rt,handleValidations:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={};return I||H("show",".tooltip"),t&&(e=document.getElementById("".concat(I?"mm-wrapper":"dm-wrapper"))),Pe.showPincodeOrCity&&!Pt()?I?(Ot(document.getElementById("deliver-to-section").offsetTop+98),Ke(i={pincode:!0,slideStart:!0,message:"* This is required"}),setTimeout((function(){Ke({pincode:!0,slideStart:!1,message:"* This is required"})}),3e3),!1):(Ke(i={pincode:!0,message:"* This is required",fieldName:"pincodeTooltip",pincodeTooltip:!0}),!1):At()||ae.itemDesiredDeliveryDate?(null!==Ne&&void 0!==Ne&&Ne.personalizedProduct&&function(){var n,o;Y(!0);for(var r=Ne.personalizedOptions,l=0,a=function(){var n=l;if("Y"===r[n].required){var a,c,s=pe.filter((function(e){return e.fieldName===r[n].fieldName}));if(!s.length)if(I&&!t&&Ye[r[l].contentType].current&&Ot(Ye[r[l].contentType].current.offsetTop+200),i=_(_({},i),{},(a={},(0,d.default)(a,r[n].fieldName,!0),(0,d.default)(a,"fieldName","personalisedTooltip"),(0,d.default)(a,"personalisedTooltip",!0),(0,d.default)(a,"message","* This is required"),a)),t){var p,v=null===(p=e)||void 0===p?void 0:p.querySelector("[data-multiupload-id^=".concat(r[n].fieldName,"]"));v&&!o&&(o=v)}if(s.length)if((null===(c=(0,u.Z)(s,1)[0].value)||void 0===c?void 0:c.filter((function(e){return e}))).length<parseInt(r[n].minInputRequired,10)){var f;if(I&&!t&&Ye[r[l].contentType].current&&Ot(Ye[r[l].contentType].current.offsetTop+200),i=_(_({},i),{},(f={},(0,d.default)(f,r[n].fieldName,!0),(0,d.default)(f,"fieldName","personalisedTooltip"),(0,d.default)(f,"personalisedTooltip",!0),(0,d.default)(f,"message","* This is required"),f)),t){var m,g=null===(m=e)||void 0===m?void 0:m.querySelector("[data-multiupload-id^=".concat(r[n].fieldName,"]"));g&&!o&&(o=g)}if(Ke(i),!t)return"break"}}l+=1};l<r.length;){if("break"===a())break}null===(n=o)||void 0===n||n.scrollIntoView({behavior:"smooth",block:"end"})}(),!I&&"CAKE"===$.product.primaryCategoryId&&ce.length>0&&!ue?(Ke(i={cakeFlavour:!0,message:"Please select flavour.",fieldName:"cakeFlavourTooltip",cakeFlavourTooltip:!0}),!1):(Ke(i),!(Object.keys(i).length>0))):(I&&Ot(document.getElementById("deliver-on-section").offsetTop+90),Ke(i={shippingMethod:!0,message:"* This is required",fieldName:"shippingMethodTooltip",shippingMethodTooltip:!0}),!1)},clearError:ot,getVirtualProduct:tt,sanitizeVariantList:pt,handleTextPersonalization:function(e,t){var i={derivedFieldName:t.name,fieldName:t.fieldName,label:t.label,contentType:t.contentType,value:e};return S()((function(){return ut(i)}),1e3)(),!0},userPersonalization:pe,prepareCartPayload:function(){var e,t,n,o=new URL(null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.href),r=ae.shippingSlot,l={};"Y"===(null===r||void 0===r?void 0:r.isDynamic)&&(l.dynamicStartTime=null===r||void 0===r?void 0:r.startTime,l.dynamicEndTime=null===r||void 0===r?void 0:r.endTime);var a=_(_(_({},ae),l),{},{occasion:(null===o||void 0===o||null===(n=o.searchParams)||void 0===n?void 0:n.get("OCCASION_TAGS"))||"",selectedCurrency:K,add_product_id:tt()?se.productId:Ce});if(!I){var d=ee.deliveryDates,u=ee.shippingDetails;if("Y"===ie&&!nt()&&(0,T.co)(u)){var c=(0,T.El)(ae.itemDesiredDeliveryDate,d),s=c.startRangeDate,p=c.endRangeDate;a.leadTimeDeliveryDatesList="".concat(s,",").concat(p)}}return i.personalizedInfo.personalizedProduct&&pe.length>0&&(a=_(_({},a),{},{personalizedOptions:JSON.stringify(pe)})),a},checkFeatureExists:st,onCakeTypeChange:function(e){f((0,w.Pm)(e))},selectedType:de,setFlavoursList:function(){var e=pt(),t=[];e.forEach((function(e){null!==e&&void 0!==e&&e.flavour&&!t.includes(null===e||void 0===e?void 0:e.flavour)&&t.push(e.flavour)})),t.length>0&&(f((0,w.II)(t)),!I&&t.length>1?f((0,w.kZ)("")):f((0,w.kZ)(t[0])))},selectedFlavour:ue,setSelectedFlavour:w.kZ,getVariantList:vt,checkIsCakeProduct:Qe,isPersonalizedProduct:gt,checkIsInternationalProduct:et,checkIsDigitalProduct:it,selectedVariant:se,flavours:ce,getSurgePrice:function(){var e,t,n;return Zt()?{price:null===Me||void 0===Me?void 0:Me.price,defaultPrice:null===Me||void 0===Me?void 0:Me.defaultPrice,listPrice:null===Me||void 0===Me?void 0:Me.listPrice}:Ft()?{price:null===ze||void 0===ze?void 0:ze.price,defaultPrice:null===ze||void 0===ze?void 0:ze.defaultPrice,listPrice:null===ze||void 0===ze?void 0:ze.listPrice}:{price:null===i||void 0===i||null===(e=i.productPrice)||void 0===e?void 0:e.price,defaultPrice:null===i||void 0===i||null===(t=i.productPrice)||void 0===t?void 0:t.defaultPrice,listPrice:null===i||void 0===i||null===(n=i.productPrice)||void 0===n?void 0:n.listPrice}},handleImagePersonalization:ct,isCourierProduct:mt,isExpressProduct:function(){return Te===b.M5.EXPRESS},isSameSkuProduct:ht,getAssocProdIdPrice:function(e){var t;return e===Te?t={productId:Ce,price:i.productPrice.price,deliveryType:i.primaryCategoryId}:we&&we.substituteProduct&&(t={productId:we.substituteProduct.productId,price:we.substituteProduct.productPrice[we.substituteProduct.productId].price,deliveryType:we.substituteProduct.primaryProductCategoryId}),t},imageConfigs:ge,prepareInitialConfigs:at,checkMultiUploadHasError:function(){return ge.filter((function(e){return e.isSizeExtError||e.isBackendError})).length>0},checkMultiUploadedImageCount:function(){return ge.filter((function(e){return null!==e.imgUrl})).length},discardMultiImage:function(e,t){var i=(0,a.Z)(ge),n=i.findIndex((function(t){return t.id===e}));n>-1&&(i[n]=_(_({},i[n]),{},{imgUrl:null,isUploaded:!1}),f((0,w.WE)(i)),Tt(i,t))},handleSingleFileUpload:Nt,handleMultipleFilesUpload:xt,isPincodeEntered:Pt,generateFilePath:kt,isValidFileSize:wt,isShippingTimeSlotSelected:At,handlePincodeSelect:_t,handleTimeSlotSelect:It,handleVariantSwitch:bt,variantList:ve,deliveryType:me,switchDeliveryType:function(e,t){if((0,k.yi)(f,t),f((0,k.Gn)({productId:t,isDesktop:!I})),f((0,w.gN)(e)),e!==Te&&t!==Ce){var i={productId:t,catalogId:ye};(0,k.id)(i,f),f((0,k.jT)({productId:t,isDesktop:!I})),rt({timeSlotId:"",itemDesiredDeliveryDate:"",shippingMethodId:""})}Ct(e),ot(),f((0,w.Tm)(e))},animateTooltip:Ct,isNonDeliverable:function(){var e,t=null===we||void 0===we||null===(e=we.substituteProduct)||void 0===e?void 0:e.productId,i=ee.isDatesAvailable,n=ht()?!(Rt(Ce)||Rt(t)):Object.keys(ee).length>0&&!i;return!et()&&n},checkIsSKUDeliverable:Rt,isPriceSurgedOnPincode:Ft,isPriceSurgedOnDate:Zt,handleLocationSelect:Mt,getProductCombos:function(){var e=[];return i.productComboComponents&&(e=i.productComboComponents),e},extractPersonalization:function(e){var t={havePersonalizations:!1,personalization:{}},i=pe.filter((function(t){return t.fieldName===e}));if(i.length>0){var n=(0,u.Z)(i,1)[0];t.havePersonalizations=!0,t.personalization=n}else{var o,r=(0,C.Wm)([Ce]),l=null===we||void 0===we||null===(o=we.substituteProduct)||void 0===o?void 0:o.productId;if(!r&&l&&(r=(0,C.Wm)([l])),!r)return t;if((r=JSON.parse(r)).po.length){var a,d=null===(a=r.po)||void 0===a?void 0:a.filter((function(t){return t.fieldName===e}));if((null===d||void 0===d?void 0:d.length)>0){var c=(0,u.Z)(d,1)[0];t.personalization=c,t.havePersonalizations=!0}}else t.personalization={}}return t},prepareConfigsFromLocalStorage:function(e,t){var i=(0,a.Z)(t).map((function(t,i){return e[i]?_(_({},t),{},{isUploaded:!0,imgUrl:e[i]}):_(_({},t),{},{isSizeExtError:!1})}));f((0,w.WE)(i))},isUAECatalog:$e,clearShipping:function(){rt({deliveryLocation:"",destlookup:"",matchedPincode:"",pinCode:"",timeSlotId:"",itemDesiredDeliveryDate:"",shippingMethodId:"",itemDesiredDeliveryDatesList:""})},getPersonalizedUploadedImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=null,i=g.query;if(i.prv&&i.bucket)return t="https://".concat(i.bucket,".s3-accelerate.amazonaws.com/pz/").concat(i.prv);var n=window.localStorage.getItem(e);return n&&(n=JSON.parse(n),t=D()(n,"po.[0].value.[0]",null)),t},setMobileModalStatus:z,mobileModalStatus:U,showHideDesktopTooltips:H,uploadProgressStatus:he,clearDeliveryDetails:Dt,setActiveStickyTab:j,activeStickyTab:F,clearFieldsOnAddToCart:function(){var e;(Dt(),dt(),f((0,w.kZ)("")),(st(b.pX.INGREDIENTS)||st(b.pX.STEMS)||st(b.pX.PIECES))&&null!==fe&&void 0!==fe&&fe.length&&fe[0].type)&&f((0,w.Pm)(null===(e=fe[0])||void 0===e?void 0:e.type));(yt()||it())&&Et()},showTooltip:B,setShowTooltip:W,isCourierDelivery:yt,autoFillDate:Et,quantityList:fe,checkIsPriceSurge:function(e){var t,n=e.price,o=e.listPrice,r=n!==o,l=0;return o&&n&&o>n&&o!==n&&(l=(100-n/o*100).toFixed(0)),r&&0===l&&n>(null===i||void 0===i||null===(t=i.productPrice)||void 0===t?void 0:t.price)&&!yt()},removeUserPersonalization:dt,clearPersonalizationFromStore:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];i=null!==t?pe.map((function(i){var n=i;return n.fieldName!==e||(n.value[t]=null),n})):pe.filter((function(t){return t.fieldName!==e})),f((0,w.Pw)(i))},isFirstValidationDone:V,checkIsDigitalProductWithTypeId:nt,hasSelectedDateInCookie:function(){var e=(0,v.parseCookies)().lastSelectedDeliveryDate;return Boolean(e)}};return(0,n.jsx)(M.Provider,{value:jt,children:t})};M.Consumer}}]);
//# sourceMappingURL=2573-75560b09cde4a89acbd5.js.map